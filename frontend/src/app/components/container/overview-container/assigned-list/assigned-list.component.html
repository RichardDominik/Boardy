<div id="task-list-container">
    <h2>Assigned to me</h2>

    <div class="task-filter-button" (click)="showHideFilter()">Filter</div>
    <div class="common-filters_container">
        <form>
            <input type="radio" id="all" value="" name="status" (change)="onCustomFilter($event.target.value)" checked/>
            <label class="radio-label" for="all">All</label>

            <input class="radio-button" type="radio" id="in-progress" value="in_progress" name="status" (change)="onCustomFilter($event.target.value)" />
            <label class="radio-label" for="in-progress">In progress</label>

            <input class="radio-button" type="radio" id="test" value="to_test" name="status" (change)="onCustomFilter($event.target.value)" />
            <label class="radio-label" for="test">To test</label>

            <input class="radio-button" type="radio" id="done" value="done" name="status" (change)="onCustomFilter($event.target.value)" />
            <label class="radio-label" for="done">Done</label>
        </form>
    </div>
    <div [ngClass]="{'task-filter': true, 'hidden': showFilter === false}">
        <div class="task-filter-option">
            <label for="task-filter-title">Title</label><br>
            <input id="task-filter-title" type="text" (input)="onFilter($event.target)" />
        </div>
        <div class="task-filter-option">
            <label for="task-filter-status">Status</label><br>
            <select id="task-filter-status" (change)="onFilter($event.target)">
                <option value="">ALL</option>
                <option value="free">FREE</option>
                <option value="in_progress">IN PROGRESS</option>
                <option value="to_test">TO TEST</option>
                <option value="done">DONE</option>
            </select>
        </div>
        <div class="task-filter-option">
            <label for="task-filter-prio">Priority</label><br>
            <select id="task-filter-prio" (change)="onFilter($event.target)">
                <option value="">ALL</option>
                <option value="low">LOW</option>
                <option value="medium">MEDIUM</option>
                <option value="high">HIGH</option>
            </select>
        </div>

    </div>

    <table [ngClass]="{'task-table': true, 'task-table-filter': showFilter === true}" (scroll)="onScroll($event)">
        <thead>
            <tr>
                <th>Title</th>
                <th>Status</th>
                <th>Deadline</th>
                <th>Priority</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let task of filteredTasks" (click)="showTaskDetail(task?.id)" class="task-table-item">
                <td>
                    <div class="task-table-title">{{task?.title}}</div>
                </td>
                <td>
                    <div class="task-table-status {{task?.status}}">{{status[task?.status]}}</div>
                </td>
                <ng-template #empty>
                    <td></td>
                </ng-template>
                <td class="task-table-deadline">{{task?.deadline.split(" ")[0]}}</td>
                <td>
                    <div class="task-table-status {{task?.priority}}">{{priority[task?.priority]}}</div>
                </td>
            </tr>
        </tbody>
    </table>
    <div class="pagination">
        <div class="pagination-links">
            <a *ngIf="pagination.prev != null" (click)="prevPage()"><span>Prev</span> &laquo;</a>
            <a *ngIf="pagination.next != null" (click)="nextPage()">&raquo; <span>Next</span></a>
        </div>
    </div>
</div>